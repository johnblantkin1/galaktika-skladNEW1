name: Flutter CI

on:
 push:
 branches:
 - main
 pull_request:
 branches:
 - main

jobs:
 build:
 runs-on: ubuntu-latest
 
 steps:
 - name: Checkout repository
 uses: actions/checkout@v4
 with:
 fetch-depth: 0
 submodules: true

 - name: Set up Flutter
 uses: subosito/flutter-action@v2
 with:
 flutter-version: '3.22.0'

 - name: Navigate to project directory
 run: |
 cd galaktika_sklad_ready
 echo "Current directory: $(pwd)"
 ls -la

 - name: Verify Flutter installation
 run: flutter doctor

 - name: Check pubspec.yaml existence
 run: |
 echo "Searching for pubspec.yaml..."
 if ! -f "pubspec.yaml" ; then
 echo "pubspec.yaml not found in current directory!"
 exit 1
 fi

 - name: Install dependencies
 run: |
 flutter pub get
 cd .. # Возвращаемся в родительскую директорию
 flutter pub get

 - name: Build APK
 run: |
 cd galaktika_sklad_ready
 flutter build apk --release

 - name: Verify APK existence
 run: |
 cd galaktika_sklad_ready
 if ! -f "build/app/outputs/flutter-apk/app-release.apk" ; then
 echo "APK file not found!"
 exit 1
 fi
 echo "APK file exists and is ready for upload"

 - name:
